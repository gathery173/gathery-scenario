<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gathery Scenarios</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />

    <script src="./script/_load.js"></script>
    <script src="./script/_drag.js" defer></script>
    <script type="module" src="./script/_render.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="menu d-flex;">

      <div style="width:30px;  height: 30px;">
      
      </div>
      <button id="logOrderButton" class="btn btn-primary">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-floppy"
          viewBox="0 0 16 16"
        >
          <path d="M11 2H9v3h2z" />
          <path
            d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z"
          />
        </svg>
      </button>

      <button class="btn btn-primary add-text-btn">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-card-text"
          viewBox="0 0 16 16"
        >
          <path
            d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2z"
          />
          <path
            d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8m0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5"
          />
        </svg>
      </button>
      <button class="btn btn-primary add-music-btn">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-music-note-beamed"
          viewBox="0 0 16 16"
        >
          <path
            d="M6 13c0 1.105-1.12 2-2.5 2S1 14.105 1 13s1.12-2 2.5-2 2.5.896 2.5 2m9-2c0 1.105-1.12 2-2.5 2s-2.5-.895-2.5-2 1.12-2 2.5-2 2.5.895 2.5 2"
          />
          <path fill-rule="evenodd" d="M14 11V2h1v9zM6 3v10H5V3z" />
          <path d="M5 2.905a1 1 0 0 1 .9-.995l8-.8a1 1 0 0 1 1.1.995V3L5 4z" />
        </svg>
      </button>
      <button class="btn btn-primary add-comments-btn">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-chat-dots-fill"
          viewBox="0 0 16 16"
        >
          <path
            d="M16 8c0 3.866-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7M5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0m4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"
          />
        </svg>
      </button>
      <button class="btn btn-primary add-actor-btn" onclick="print()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer" viewBox="0 0 16 16">
          <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"/>
          <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1"/>
        </svg>
        </svg>
      </button>
      <button class="btn btn-primary" onclick="copy()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-share" viewBox="0 0 16 16">
          <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5m-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"/>
        </svg>
      </button>
    </div>
    <div class="sub-menu d-flex;">

      <div style="width:30px;  height: 30px;">
      
      </div>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a onclick="window.location.href='dashboard.html?session=d56b699830e77ba53855679cb1d252da'">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page" id="bread-active">Untitled</li>
        </ol>
      </nav>
     
    </div>
    <div class="list js-list" id="list">
      <br><br>
    </div>

    <!-- Modal -->
    <div
      class="modal fade"
      id="addItemModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="addItemModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addItemModalLabel">Add New Item</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form id="addItemForm">
              <div class="form-group">
                <label for="itemName">Item Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="itemName"
                  required
                />
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="submit" class="btn btn-primary" form="addItemForm">
              Add Item
            </button>
          </div>
        </div>
      </div>
    </div>

  

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
      /***********************
       *      Variables       *
       ***********************/
    </script>
  </body>
</html>

<script>
  function print() {
    window.open(`./print.html?id=${new URLSearchParams(window.location.search).get("id")}`, '_blank')
  }
  function copy() {

  const textToCopy = `gathery-scenarios.pages.dev/share.html?id=${new URLSearchParams(window.location.search).get("id")}`;
      navigator.clipboard.writeText(textToCopy).then(() => {
        console.log('Text copied to clipboard');
        alert('Text copied to clipboard: ' + textToCopy);
      }).catch(err => {
        console.error('Failed to copy text: ', err);
      });
    }

  function loadActorsForItem(item) {
    const formFloating = item.querySelector(".form-floating");
  }


  function addNewItem(type) {
    console.log(type);
    let newItemHTML;
    if (type === "Text") {
      newItemHTML = `<div class="list__item is-idle js-item text">
        <div style="width: 100%;">
          <div class="form-floating">
            <input type="text" class="form-control actor-input" placeholder="Ім'я">
            <textarea class="textarea resize-ta mt-2"></textarea>
          </div>
        </div>
      <div class="d-flex actions">
        <div class="drag-handle js-drag-handle"></div>
      </div>
      <div class="delete-item-btn">
          &times;
        </div>
    </div>`;
    } else if (type === "Music") {
      newItemHTML = `<div class="list__item is-idle js-item music">
      <div class="form-floating d-flex" style="width: 100%;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-music-note-list" viewBox="0 0 16 16" style="transform: translateY(10px); margin-right: 15px; margin-left: 10px;">
        <path d="M12 13c0 1.105-1.12 2-2.5 2S7 14.105 7 13s1.12-2 2.5-2 2.5.895 2.5 2"/>
        <path fill-rule="evenodd" d="M12 3v10h-1V3z"/>
        <path d="M11 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 16 2.22V4l-5 1z"/>
        <path fill-rule="evenodd" d="M0 11.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5m0-4A.5.5 0 0 1 .5 7H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5m0-4A.5.5 0 0 1 .5 3H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5"/>
      </svg>
        <input type="text" class="form-control actor-input" placeholder="Музика">
      </div>
      <div class="d-flex actions">
        <div class="drag-handle js-drag-handle"></div>
        <div>
          <button class="btn delete delete-item-btn">&times;</button>
        </div>
      </div>
    </div>`;
    } else if (type === "Comments") {
      newItemHTML = `<div class="list__item is-idle js-item comment">
      <div class="form-floating d-flex" style="width: 100%;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-dots" viewBox="0 0 16 16"  style="transform: translateY(10px); margin-right: 15px; margin-left: 10px;">
        <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
        <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9 9 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.4 10.4 0 0 1-.524 2.318l-.003.011a11 11 0 0 1-.244.637c-.079.186.074.394.273.362a22 22 0 0 0 .693-.125m.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6-3.004 6-7 6a8 8 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a11 11 0 0 0 .398-2"/>
      </svg>
        <input type="text" class="form-control actor-input" placeholder="Коментар">

      </div>
      <div class="d-flex actions">
        <div class="drag-handle js-drag-handle"></div>
        <div>
          <button class="btn delete delete-item-btn">&times;</button>
        </div>
      </div>

    </div>`;
    }

    document
      .getElementById("list")
      .insertAdjacentHTML("beforeend", newItemHTML);

    // Load actors for the newly created item
    const newItem = document.querySelector(".list__item:last-child");
    loadActorsForItem(newItem);

    // Attach event listener to the newly created textarea
    const textarea = newItem.querySelector(".resize-ta");
    textarea.addEventListener("input", () => autoResizeTextarea(textarea));
    autoResizeTextarea(textarea); // Initial resize to fit content
  }

  document.querySelectorAll(".add-text-btn").forEach((button) => {
    button.addEventListener("click", () => {
      addNewItem("Text");
    });
  });

  document.querySelectorAll(".add-music-btn").forEach((button) => {
    button.addEventListener("click", () => {
      addNewItem("Music");
    });
  });

  document.querySelectorAll(".add-comments-btn").forEach((button) => {
    button.addEventListener("click", () => {
      addNewItem("Comments");
    });
  });

  document.querySelectorAll(".delete-item-btn").forEach((button) => {
    button.addEventListener("click", () => {
      // Remove the parent list item when the delete button is clicked
      button.closest(".js-item").remove();
    });
  });

  document.addEventListener("click", function (event) {
    if (event.target.classList.contains("delete-item-btn")) {
      // If the clicked element has the class 'delete-item-btn', remove its parent list item
      event.target.closest(".js-item").remove();
    }
  });
</script>
<style></style>

<script>
  
  function autoResizeTextarea(textarea) {
    textarea.style.height = "auto";
    textarea.style.height = textarea.scrollHeight + "px";
  }
  document.addEventListener("DOMContentLoaded", function () {
    loadActors();
    setTimeout(()=>{
      const textareas = document.querySelectorAll(".resize-ta");
    textareas.forEach((textarea) => {
      textarea.addEventListener("input", () => autoResizeTextarea(textarea));
      autoResizeTextarea(textarea); // Initial resize to fit content
    });

    document.querySelectorAll(".add-actor-btn").forEach((button) => {
      button.addEventListener("click", () => {
        $("#addActorModal").modal("show");
      });
    });

    document
      .getElementById("addActorForm")
      .addEventListener("submit", function (e) {
        e.preventDefault();
        const actorNameInput = document.getElementById("actorName");
        const actorName = actorNameInput.value.trim();
        if (actorName) {
          addActorToStorage(actorName);
          actorNameInput.value = "";
          $("#addActorModal").modal("hide");
        }
      });
    }, 1000)
    
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Existing code...

    // Add click event listener to the breadcrumb items
    document.querySelectorAll('.breadcrumb-item a').forEach(item => {
      item.addEventListener('click', function(event) {
        event.preventDefault(); // Prevent default link behavior
        changeBreadcrumbName(this);
      });
    });
  });

  // Function to change the breadcrumb name
  function changeBreadcrumbName(element) {
    // Get the current active breadcrumb
    const activeBreadcrumb = document.querySelector('.breadcrumb-item.active');
    if (activeBreadcrumb) {
      activeBreadcrumb.textContent = element.textContent;
    }
  }
</script>
